<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podcasts von S2E</title>
    <link rel="apple-touch-icon" sizes="57x57" href="../../favicon/apple-touch-icon-57x57.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../favicon/favicon-16x16.png">
    <link rel="stylesheet" href="../../style.css">
</head>
<body>

<header>
    <h1>Podcasts von S2E</h1>
    <p>Eine Sammlung der S2E Podcasts</p>
</header>

<main class="podcast-grid">

    <!-- PLATZHALTER S2E -->
    <article class="podcast-card">
        <h3>Beispiel S2E Podcast</h3>
        <p>Ein Beispiel f√ºr eine Podcast-Episode der S2E. Hier klicken zum Anh√∂ren.</p>
        
        <audio controls preload="metadata">
            <source src="#" type="audio/mpeg">
            <source src="#" type="audio/mp4">
            <source src="#" type="audio/wav">
            Dein Browser unterst√ºtzt das Audio-Element nicht.
        </audio>

        <details>
            <summary>Details & Infos</summary>
            <ul class="podcast-details">
                <li class="podcast-item"><strong>Titel:</strong> Noch keine Episode</li>
                <li class="podcast-item"><strong>Info:</strong> Inhalte kommen bald.</li>
            </ul>
        </details>
    </article>

</main>

<footer>
    <p>&copy; 2026 Hosted by Panumic | Bildungszwecke</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const audioElements = document.querySelectorAll('audio');

        audioElements.forEach(audio => {
            const sources = audio.querySelectorAll('source');
            let isMoodle = false;
            let moodleSrc = '';

            sources.forEach(source => {
                if (source.src.includes('moodle') || source.src.includes('ksasz.ch')) {
                    isMoodle = true;
                    moodleSrc = source.src;
                }
            });

            if (isMoodle) {
                // Add play event listener
                audio.addEventListener('play', function(event) {
                    if (audio.dataset.authCheck) return; // Already checked

                    event.preventDefault();
                    audio.pause();

                    const userConfirmed = confirm(
                        "‚ö†Ô∏è Login Required for Moodle Content\n\n" +
                        "This audio file is hosted on Moodle (KSASZ). You need to be logged in to listen.\n\n" +
                        "Click OK to open the Moodle login page in a new tab. Once you've logged in, come back here and press play again."
                    );

                    if (userConfirmed) {
                        audio.dataset.authCheck = "true";
                        window.open(moodleSrc, '_blank');
                    }
                });

                // Find the title element in this podcast card to add visual indicator if not present
                const card = audio.closest('.podcast-card');
                if (card) {
                    const title = card.querySelector('h3');
                    if (title && !title.querySelector('.moodle-indicator')) {
                         const indicator = document.createElement('span');
                         indicator.className = 'moodle-indicator';
                         indicator.textContent = 'üîí MOODLE';
                         indicator.title = 'Requires Moodle Login';
                         title.appendChild(indicator);
                    }
                }
            }
        });
    });
</script>

<style>
    .moodle-indicator {
        display: inline-block;
        background-color: #f39c12;
        color: white;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.6em; /* Smaller relative to h3 */
        margin-left: 8px;
        vertical-align: middle;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
</style>
</body>
</html>
